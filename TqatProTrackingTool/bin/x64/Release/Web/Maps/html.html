<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<style type='text/css'>
html {
	height: 100%;
	width:100%;
	overflow-y:auto;
	margin:0 0 0 0;
	padding: 0 0 0 0
}
body {
	height: 100%;
	width:100%;
	margin: 0 0 0 0;
	padding: 0 0 0 0;
	overflow-y:auto;
	background-color: #ffffff
}
#map_canvas {
	height:100%;
	width:100%;
	margin: 0 0 0 0;
	padding: 0 0 0 0;
	overflow-y:hidden;
	background-color: #ffffff
}
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=en&libraries=geometry">
</script>
<script type='text/javascript'> 
  var geocoder;
  var map;
  var trafficLayer;
  var bikeLayer;
  var poly;
  var directionsDisplay;
  var directionsService;
  var oldDirections = [];
  var currentDirections = null;
  var DirectionsArr = [];
  var polys = [];

  function initialize() {
      directionsService = new google.maps.DirectionsService();
      geocoder = new google.maps.Geocoder();
      var latlng = new google.maps.LatLng(25.30, 51.49);
      var myOptions = {
          zoom: 10,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
      trafficLayer = new google.maps.TrafficLayer();
      bikeLayer = new google.maps.BicyclingLayer();
      createcirclestyleobject();
      addMarkerPolyStyle();
      addPolyStyle();
      google.maps.event.addListener(map, 'mousemove', function (point) {
          var lnglatstr = point.latLng.lng().toFixed(6) + ', ' + point.latLng.lat().toFixed(6);
          document.getElementById("LatLong").value = lnglatstr;
      });
  }
  var MarkersOnlyArray = [];

  function addMarkerOnly(event) {
      var image = document.getElementById("MarkerImage").value;
      var marker = new google.maps.Marker({
          position: event.latLng,
          map: map,
          icon: image
      });
      MarkersOnlyArray.push(marker);
      document.getElementById("LatLong").value = event.latLng;
  }

  function showMarkersOnly() {
      if (MarkersOnlyArray) {
          for (i in MarkersOnlyArray) {
              MarkersOnlyArray[i].setMap(map);
          }
      }
  }

  function clearMarkersOnly() {
      if (MarkersOnlyArray) {
          for (i in MarkersOnlyArray) {
              MarkersOnlyArray[i].setMap(null);
          }
      }
  }

  function deleteMarkersOnly() {
      if (MarkersOnlyArray) {
          for (i in MarkersOnlyArray) {
              MarkersOnlyArray[i].setMap(null);
          }
          MarkersOnlyArray.length = 0;
      };
  }
  var markersPolys = [];

  function addMarkerPolyStyle() {
      var polyOptions = {
          strokeColor: document.getElementById('strokeColor').value,
          strokeOpacity: document.getElementById("strokeOpacity").value,
          strokeWeight: document.getElementById("strokeWeight").value
      };
      poly = new google.maps.Polyline(polyOptions);
      poly.setMap(map);
  }

  function addMarkerPoly(event) {
      var image = document.getElementById("PolyImage").value;
      var path = poly.getPath();
      path.push(event.latLng);
      var markerPoly = new google.maps.Marker({
          position: event.latLng,
          title: '#' + path.getLength(),
          map: map,
          icon: image
      });
      polys.push(poly);
      markersPolys.push(markerPoly);
  }

  function clearMarkersPolys() {
      if (markersPolys) {
          for (i in markersPolys) {
              markersPolys[i].setMap(null);
          }
      }
      if (polys) {
          for (i in polys) {
              polys[i].setMap(null);
          }
      }
  }

  function clearMarkersPolysMarker() {
      if (markersPolys) {
          for (i in markersPolys) {
              markersPolys[i].setMap(null);
          }
      }
  }

  function clearMarkersPolysPoly() {
      if (polys) {
          for (i in polys) {
              polys[i].setMap(null);
          }
      }
  }

  function showMarkersPolys() {
      if (markersPolys) {
          for (i in markersPolys) {
              markersPolys[i].setMap(map);
          }
      }
      if (polys) {
          for (i in polys) {
              polys[i].setMap(map);
          }
      }
  }

  function showMarkersPolysMarker() {
      if (markersPolys) {
          for (i in markersPolys) {
              markersPolys[i].setMap(map);
          }
      }
  }

  function showMarkersPolysPoly() {
      if (polys) {
          for (i in polys) {
              polys[i].setMap(map);
          }
      }
  }

  function deleteMarkersPolys() {
      if (markersPolys) {
          for (i in markersPolys) {
              markersPolys[i].setMap(null);
          }
          markersPolys.length = 0;
      };
      if (polys) {
          for (i in polys) {
              polys[i].setMap(null);
          }
          polys.length = 0;
      }
  }

  function deleteMarkersPolysMarker() {
      if (markersPolys) {
          for (i in markersPolys) {
              markersPolys[i].setMap(null);
          }
          markersPolys.length = 0;
      };
  }

  function deleteMarkersPolysPoly() {
      if (polys) {
          for (i in polys) {
              polys[i].setMap(null);
          }
          polys.length = 0;
      }
  }
  var PolysOnlyArray = [];

  function addPolyStyle() {
      var polyOnlyOptions = {
          strokeColor: document.getElementById('strokeColor1').value,
          strokeOpacity: document.getElementById("strokeOpacity1").value,
          strokeWeight: document.getElementById("strokeWeight1").value
      };
      polyOnly = new google.maps.Polyline(polyOnlyOptions);
      polyOnly.setMap(map);
  }

  function addPoly(event) {
      var pathOnly = polyOnly.getPath();
      pathOnly.push(event.latLng);
      PolysOnlyArray.push(polyOnly);
  }

  function clearPolyOnly() {
      if (PolysOnlyArray) {
          for (i in PolysOnlyArray) {
              PolysOnlyArray[i].setMap(null);
          }
      }
  }

  function showPolyOnly() {
      if (PolysOnlyArray) {
          for (i in PolysOnlyArray) {
              PolysOnlyArray[i].setMap(map);
          }
      }
  }

  function deletePolyOnly() {
      if (PolysOnlyArray) {
          for (i in PolysOnlyArray) {
              PolysOnlyArray[i].setMap(null);
          }
          PolysOnlyArray.length = 0;
      }
  }

  function EnableMarkerOnly() {
      google.maps.event.addListener(map, 'click', addMarkerOnly);
  }

  function EnableMarkerPoly() {
      google.maps.event.addListener(map, 'click', addMarkerPoly);
  }

  function EnablePoly() {
      google.maps.event.addListener(map, 'click', addPoly);
  }

  function EnableDirection() {
      google.maps.event.addListener(map, 'click', function (event) {
          addDirection(event.latLng);
      });
  }

  function DisableClick() {
      google.maps.event.clearListeners(map, 'click');
  }
  var startMarkerArr = [];
  var endMarkerArr = [];
  var centerPoint;
  var radiusPoint;
  var circleArr = [];
  var circlestyles = [];

  function circstyle() {
      this.name = "Circ";
      this.color = "#FF0000";
      this.fill = "#0000FF";
      this.width = 2;
      this.lineopac = 0.8;
      this.fillopac = 0.6;
  }

  function createcirclestyleobject() {
      var cirstyle = new circstyle();
      circlestyles.push(cirstyle);
  }

  function activateCircle() {
      circle = new google.maps.Circle({
          map: map,
          fillColor: circlestyles[0].fill,
          fillOpacity: circlestyles[0].fillopac,
          strokeColor: circlestyles[0].color,
          strokeOpacity: circlestyles[0].lineopac,
          strokeWeight: circlestyles[0].width
      });
  }

  function EnablestartMarker(event) {
      google.maps.event.clearListeners(map, 'click');
      google.maps.event.addListener(map, 'click', setstartMarker);
  }

  function setstartMarker(event) {
      startMarker = new google.maps.Marker({
          position: event.latLng,
          draggable: true,
          map: map
      });
      startMarkerArr.push(startMarker);
      google.maps.event.clearListeners(map, 'click');
      google.maps.event.addListener(map, 'click', setendMarker);
  }

  function setendMarker(event) {
      nemarker = new google.maps.Marker({
          position: event.latLng,
          draggable: true,
          raiseOnDrag: false,
          map: map
      });
      endMarkerArr.push(nemarker);
      createcirclestyleobject();
      activateCircle();
      createcircle();
  }

  function createcircle() {
      google.maps.event.clearListeners(map, 'click');
      google.maps.event.addListener(startMarker, 'drag', drawCircle);
      google.maps.event.addListener(nemarker, 'drag', drawCircle);
      startMarker.setDraggable(true);
      startMarker.setAnimation(null);
      circleArr.push(circle);
      drawCircle();
  }

  function drawCircle() {
      for (i in startMarkerArr) {
          centerPoint = startMarkerArr[i].getPosition();
          radiusPoint = endMarkerArr[i].getPosition();
          circleArr[i].bindTo('center', startMarkerArr[i], 'position');
          calc = CalcDistance(centerPoint.lat(), centerPoint.lng(), radiusPoint.lat(), radiusPoint.lng());
          circleArr[i].setRadius(calc);
      }
  }

  function CalcDistance(lat1, lon1, lat2, lon2) {
      var R = 6371000;
      var dLat = (lat2 - lat1) * Math.PI / 180;
      var dLon = (lon2 - lon1) * Math.PI / 180;
      var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
          Math.sin(dLon / 2) * Math.sin(dLon / 2);
      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
      var d = R * c;
      return d;
  }

  function clearCircle() {
      if (startMarkerArr) {
          for (i in startMarkerArr) {
              startMarkerArr[i].setMap(null);
          }
      }
      if (endMarkerArr) {
          for (i in endMarkerArr) {
              endMarkerArr[i].setMap(null);
          }
      }
      if (circleArr) {
          for (i in circleArr) {
              circleArr[i].setMap(null);
          }
      }
  }

  function ShowCircle() {
      if (startMarkerArr) {
          for (i in startMarkerArr) {
              startMarkerArr[i].setMap(map);
          }
      }
      if (endMarkerArr) {
          for (i in endMarkerArr) {
              endMarkerArr[i].setMap(map);
          }
      }
      if (circleArr) {
          for (i in circleArr) {
              circleArr[i].setMap(map);
          }
      }
  }

  function DeleteCircle() {
      if (startMarkerArr) {
          for (i in startMarkerArr) {
              startMarkerArr[i].setMap(null);
          }
          startMarkerArr.length = 0;
      }
      if (endMarkerArr) {
          for (i in endMarkerArr) {
              endMarkerArr[i].setMap(null);
          }
          endMarkerArr.length = 0;
      }
      if (circleArr) {
          for (i in circleArr) {
              circleArr[i].setMap(null);
          }
          circleArr.length = 0;
      }
  }
  var MarkerPolygonArr = [];
  var MarkerPolygonArray = [];
  var triangleCoords = []
  var PolygonArr = []
  var triangleCoordsArr = []

      function EnableMarkerPolygon(event) {
          google.maps.event.clearListeners(map, 'click');
          google.maps.event.addListener(map, 'click', setMarkerPolygon);
      }

      function setMarkerPolygon(event) {
          MarkerPolygonArr.length = 0;
          MarkerPolygon = new google.maps.Marker({
              position: event.latLng,
              draggable: false,
              map: map
          });
          MarkerPolygonArr.push(MarkerPolygon);
          MarkerPolygonArray.push(MarkerPolygon);
          settriangleCoordsArr()
      }

      function settriangleCoordsArr() {
          for (i in MarkerPolygonArr) {
              triangleCoords.push(MarkerPolygonArr[i].position);
          }
          drawPolygon()
      }
  var g = google.maps.geometry.spherical;
  var AreaLatLng = []
  var points = new google.maps.MVCArray();
  var length, Area, radius = 6371000;

  function drawPolygon() {
      bermudaTriangle = new google.maps.Polygon({
          paths: triangleCoords,
          strokeColor: "#FF0000",
          strokeOpacity: 0,
          strokeWeight: 0,
          fillColor: "#FF0000",
          fillOpacity: 0.35
      });
      bermudaTriangle.setMap(map);
      PolygonArr.push(bermudaTriangle);
      ShowPolygon();
      for (i in MarkerPolygonArr) {
          var newpos = MarkerPolygonArr[i].getPosition();
          points.push(newpos);
      }
  }

  function calcArea() {
      var pathref = geoPathsArr[0];
      Area = g.computeArea(pathref, radius).toFixed(0);
      var areaKm = Area / 1000 / 1000;
      document.getElementById("AreaMeter").value = Area;
      document.getElementById("Area").value = (areaKm).toFixed(2);
      document.getElementById("AreaFeet").value = (areaKm * 10763910.4).toFixed(2);
      document.getElementById("AreaMile").value = (areaKm / 1.61 / 1.61).toFixed(2);
  }

  function GetGeoFenceData() {
      var pathref = geoPathsArr[0];
      document.getElementById("geodata").value = pathref;
  }

  function DeletePolygon() {
      if (PolygonArr) {
          for (i in PolygonArr) {
              PolygonArr[i].setMap(null);
          }
          PolygonArr.length = 0;
      }
      if (MarkerPolygonArray) {
          for (i in MarkerPolygonArray) {
              MarkerPolygonArray[i].setMap(null);
          }
          MarkerPolygonArray.length = 0;
      }
      if (triangleCoords) {
          triangleCoords.length = 0;
      }
      for (var j = points.getLength(); j > 0; points.removeAt(--j)) {};
      Area = 0;
      MarkerPolygonArr.length = 0;
      document.getElementById("Area").value = Area;
  }

  function ClearPolygon() {
      if (PolygonArr) {
          for (i in PolygonArr) {
              PolygonArr[i].setMap(null);
          }
      }
      if (MarkerPolygonArray) {
          for (i in MarkerPolygonArray) {
              MarkerPolygonArray[i].setMap(null);
          }
      }
  }

  function ShowPolygon() {
      if (PolygonArr) {
          for (i in PolygonArr) {
              PolygonArr[i].setMap(map);
          }
      }
      if (MarkerPolygonArray) {
          for (i in MarkerPolygonArray) {
              MarkerPolygonArray[i].setMap(map);
          }
      }
  }

  function addDirection(event) {
      directionsDisplay = new google.maps.DirectionsRenderer({
          'map': map,
          'preserveViewport': true,
          'draggable': true
      });
      directionsDisplay.setPanel(document.getElementById("directions_panel"));
      DirectionsArr.push(directionsDisplay);
      google.maps.event.addListener(directionsDisplay, 'directions_changed',
          function () {
              if (currentDirections) {
                  oldDirections.push(currentDirections);
              }
              currentDirections = directionsDisplay.getDirections();
          });
      calcRoute();
  }

  function calcRoute() {
      var start = 'doha';
      var end = 'doha';
      var request = {
          origin: start,
          destination: end,
          travelMode: google.maps.DirectionsTravelMode.DRIVING
      };
      directionsService.route(request, function (response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
              directionsDisplay.setDirections(response);
          }
      });
  }

  function undo() {
      currentDirections = null;
      directionsDisplay.setDirections(oldDirections.pop());
      if (!oldDirections.length) {}
  }

  function DeleteDirections() {
      if (DirectionsArr) {
          for (i in DirectionsArr) {
              DirectionsArr[i].setMap(null);
          }
          DirectionsArr.length = 0;
          document.getElementById("directions_panel").innerHTML = "";
      }
  }

  function ClearDirections() {
      if (DirectionsArr) {
          for (i in DirectionsArr) {
              DirectionsArr[i].setMap(null);
          }
      }
  }

  function ShowDirections() {
      if (DirectionsArr) {
          for (i in DirectionsArr) {
              DirectionsArr[i].setMap(map);
          }
      }
  }
  var MarkersAddress = [];

  function codeAddress(address) {
      if (geocoder) {
          geocoder.geocode({
              address: address
          }, function (results, status) {
              if (status == google.maps.GeocoderStatus.OK) {
                  map.setCenter(results[0].geometry.location);
                  var marker = new google.maps.Marker({
                      map: map,
                      position: results[0].geometry.location,
                      title: address
                  });
                  MarkersAddress.push(marker);
              } else {
                  alert('Geocode was not successful for the following reason: ' + status);
              }
          });
      }
  }

  function deleteMarkersAddress() {
      if (MarkersAddress) {
          for (i in MarkersAddress) {
              MarkersAddress[i].setMap(null);
          }
          MarkersAddress.length = 0;
      }
  }
  var markersArr = [];

  function GotoLatLng(Lat, Lang) {
      var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/location.png';
      var latlng = new google.maps.LatLng(Lat, Lang);
      map.setCenter(latlng);
      var marker = new google.maps.Marker({
          position: latlng,
          map: map,
          title: Lat + ',' + Lang,
          icon: image
      });
      markersArr.push(marker);
  }

  function deletGotoLatLng() {
      if (markersArr) {
          for (i in markersArr) {
              markersArr[i].setMap(null);
          }
          markersArr.length = 0;
      }
  }

  function TrafficOn() {
      trafficLayer.setMap(map);
  }

  function TrafficOff() {
      trafficLayer.setMap(null);
  }

  function BicyclingOn() {
      bikeLayer.setMap(map);
  }

  function BicyclingOff() {
      bikeLayer.setMap(null);
  }

  function StreetViewOn() {
      map.set('streetViewControl', true);
  }

  function StreetViewOff() {
      map.set('streetViewControl', false);
  }
  var markersAr = [];
  var infoWindowsAr = [];

  function codeLatLng(lat, lng, contentString) {
      var latlng = new google.maps.LatLng(lat, lng);
      map.setZoom(14);
      map.setCenter(latlng);
      marker = new google.maps.Marker({
          position: latlng,
          map: map,
          draggable: false
      });
      var infowindow = new google.maps.InfoWindow({
          content: contentString,
      });
      google.maps.event.addListener(marker, 'click', function () {
          infowindow.open(map, marker);
      });
      infoWindowsAr.push(infowindow);
      markersAr.push(marker);
  }

  function deletecodeLatLng() {
      if (markersAr) {
          for (i in markersAr) {
              markersAr[i].setMap(null);
          }
          markersAr.length = 0;
      }
      if (infoWindowsAr) {
          for (i in infoWindowsAr) {
              infoWindowsAr[i].setMap(null);
          }
          infoWindowsAr.length = 0;
      }
  }

  function disableUI() {
      map.set('disableDefaultUI', true);
      map.set('mapTypeControl', false);
  }

  function EnableUI() {
      map.set('disableDefaultUI', false);
      map.set('mapTypeControl', true);
  }
  var markersArray = [];

  function ClearMap() {
      if (markersArray) {
          for (i in markersArray) {
              markersArray[i].setMap(null);
          }
          markersArray.length = 0;
      }
      if (markersArr) {
          for (i in markersArr) {
              markersArr[i].setMap(null);
          }
          markersArr.length = 0;
      }
      if (markersAr) {
          for (i in markersAr) {
              markersAr[i].setMap(null);
          }
          markersAr.length = 0;
      }
      if (MarkersAddress) {
          for (i in MarkersAddress) {
              MarkersAddress[i].setMap(null);
          }
          MarkersAddress.length = 0;
      }
  }
</script>
<script type="text/javascript" >
function Label(opt_options) {
    this.setValues(opt_options);
    var span = this.span_ = document.createElement('span');
    span.style.cssText = 'position: relative; left: 0%; top: -8px; ' +
        'white-space: nowrap; border: 0px; font-family:arial; font-weight:bold;' +
        'padding: 2px; background-color: #ddd; ' +
        'opacity: .75; ' +
        'filter: alpha(opacity=75); ' +
        '-ms-filter: "alpha(opacity=75)"; ' +
        '-khtml-opacity: .75; ' +
        '-moz-opacity: .75;';
    var div = this.div_ = document.createElement('div');
    div.appendChild(span);
    div.style.cssText = 'position: absolute; display: none';
};
Label.prototype = new google.maps.OverlayView;
Label.prototype.onAdd = function () {
    var pane = this.getPanes().overlayLayer;
    pane.appendChild(this.div_);
    var me = this;
    this.listeners_ = [
        google.maps.event.addListener(this, 'position_changed',
            function () {
                me.draw();
            }),
        google.maps.event.addListener(this, 'text_changed',
            function () {
                me.draw();
            })
    ];
};
Label.prototype.onRemove = function () {
    this.div_.parentNode.removeChild(this.div_);
    for (var i = 0, I = this.listeners_.length; i < I; ++i) {
        google.maps.event.removeListener(this.listeners_[i]);
    }
};
Label.prototype.draw = function () {
    var projection = this.getProjection();
    var position = projection.fromLatLngToDivPixel(this.get('position'));
    var div = this.div_;
    div.style.left = position.x + 'px';
    div.style.top = position.y + 'px';
    div.style.display = 'block';
    this.span_.innerHTML = this.get('text').toString();
};
</script>
<script type="text/javascript">  
function EnableAddRuler(event) {
    google.maps.event.clearListeners(map, 'click');
    google.maps.event.addListener(map, 'click', addruler);
}
var ruler1Arr = [];
var ruler2Arr = [];
rulerpolyArr = [];
ruler1labelArr = [];
ruler2labelArr = [];

function addruler(event) {
    var ruler1 = new google.maps.Marker({
        position: event.latLng,
        map: map,
        draggable: true
    });
    var ruler2 = new google.maps.Marker({
        position: event.latLng,
        map: map,
        draggable: true
    });
    ruler1Arr.push(ruler1);
    ruler2Arr.push(ruler2);
    var ruler1label = new Label({
        map: map
    });
    var ruler2label = new Label({
        map: map
    });
    ruler1label.bindTo('position', ruler1, 'position');
    ruler2label.bindTo('position', ruler2, 'position');
    var rulerpoly = new google.maps.Polyline({
        path: [ruler1.position, ruler2.position],
        strokeColor: "#FFFF00",
        strokeOpacity: .7,
        strokeWeight: 7
    });
    rulerpoly.setMap(map);
    ruler1label.set('text', distance(ruler1.getPosition().lat(), ruler1.getPosition().lng(), ruler2.getPosition().lat(), ruler2.getPosition().lng()));
    ruler2label.set('text', distance(ruler1.getPosition().lat(), ruler1.getPosition().lng(), ruler2.getPosition().lat(), ruler2.getPosition().lng()));
    rulerpolyArr.push(rulerpoly);
    ruler1labelArr.push(ruler1label);
    ruler2labelArr.push(ruler2label);
    google.maps.event.addListener(ruler1, 'drag', function () {
        rulerpoly.setPath([ruler1.getPosition(), ruler2.getPosition()]);
        ruler1label.set('text', distance(ruler1.getPosition().lat(), ruler1.getPosition().lng(), ruler2.getPosition().lat(), ruler2.getPosition().lng()));
        ruler2label.set('text', distance(ruler1.getPosition().lat(), ruler1.getPosition().lng(), ruler2.getPosition().lat(), ruler2.getPosition().lng()));
    });
    google.maps.event.addListener(ruler2, 'drag', function () {
        rulerpoly.setPath([ruler1.getPosition(), ruler2.getPosition()]);
        ruler1label.set('text', distance(ruler1.getPosition().lat(), ruler1.getPosition().lng(), ruler2.getPosition().lat(), ruler2.getPosition().lng()));
        ruler2label.set('text', distance(ruler1.getPosition().lat(), ruler1.getPosition().lng(), ruler2.getPosition().lat(), ruler2.getPosition().lng()));
    });
}

function distance(lat1, lon1, lat2, lon2) {
    var R = 6371;
    var dLat = (lat2 - lat1) * Math.PI / 180;
    var dLon = (lon2 - lon1) * Math.PI / 180;
    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    var d = R * c;
    if (d > 1) return Math.round(d) + "km";
    else if (d <= 1) return Math.round(d * 1000) + "m";
    return d;
}

function clearRuler() {
    if (ruler1Arr) {
        for (i in ruler1Arr) {
            ruler1Arr[i].setMap(null);
        }
    }
    if (ruler2Arr) {
        for (i in ruler2Arr) {
            ruler2Arr[i].setMap(null);
        }
    }
    if (rulerpolyArr) {
        for (i in rulerpolyArr) {
            rulerpolyArr[i].setMap(null);
        }
    }
    if (ruler1labelArr) {
        for (i in ruler1labelArr) {
            ruler1labelArr[i].setMap(null);
        }
    }
    if (ruler2labelArr) {
        for (i in ruler2labelArr) {
            ruler2labelArr[i].setMap(null);
        }
    }
}

function ShowRuler() {
    if (ruler1Arr) {
        for (i in ruler1Arr) {
            ruler1Arr[i].setMap(map);
        }
    }
    if (ruler2Arr) {
        for (i in ruler2Arr) {
            ruler2Arr[i].setMap(map);
        }
    }
    if (rulerpolyArr) {
        for (i in rulerpolyArr) {
            rulerpolyArr[i].setMap(map);
        }
    }
    if (ruler1labelArr) {
        for (i in ruler1labelArr) {
            ruler1labelArr[i].setMap(map);
        }
    }
    if (ruler2labelArr) {
        for (i in ruler2labelArr) {
            ruler2labelArr[i].setMap(map);
        }
    }
}

function DeleteRuler() {
    if (ruler1Arr) {
        for (i in ruler1Arr) {
            ruler1Arr[i].setMap(null);
        }
        ruler1Arr.length = 0;
    }
    if (ruler2Arr) {
        for (i in ruler2Arr) {
            ruler2Arr[i].setMap(null);
        }
        ruler2Arr.length = 0;
    }
    if (rulerpolyArr) {
        for (i in rulerpolyArr) {
            rulerpolyArr[i].setMap(null);
        }
        rulerpolyArr.length = 0;
    }
    if (ruler1labelArr) {
        for (i in ruler1labelArr) {
            ruler1labelArr[i].setMap(null);
        }
        ruler1labelArr.length = 0;
    }
    if (ruler2labelArr) {
        for (i in ruler2labelArr) {
            ruler2labelArr[i].setMap(null);
        }
        ruler2labelArr.length = 0;
    }
}
</script>
<script type='text/javascript'> 
function RichMarker(opt_options) {
    var options = opt_options || {};
    this.ready_ = false;
    this.dragging_ = false;
    if (opt_options['visible'] == undefined) {
        opt_options['visible'] = true;
    }
    if (opt_options['shadow'] == undefined) {
        opt_options['shadow'] = '7px -3px 5px rgba(88,88,88,0.7)';
    }
    if (opt_options['anchor'] == undefined) {
        opt_options['anchor'] = RichMarkerPosition['BOTTOM'];
    }
    this.setValues(options);
}
RichMarker.prototype = new google.maps.OverlayView();
window['RichMarker'] = RichMarker;
RichMarker.prototype.getVisible = function () {
    return (this.get('visible'));
};
RichMarker.prototype['getVisible'] = RichMarker.prototype.getVisible;
RichMarker.prototype.setVisible = function (visible) {
    this.set('visible', visible);
};
RichMarker.prototype['setVisible'] = RichMarker.prototype.setVisible;
RichMarker.prototype.visible_changed = function () {
    if (this.ready_) {
        this.markerWrapper_.style['display'] = this.getVisible() ? '' : 'none';
        this.draw();
    }
};
RichMarker.prototype['visible_changed'] = RichMarker.prototype.visible_changed;
RichMarker.prototype.setFlat = function (flat) {
    this.set('flat', !! flat);
};
RichMarker.prototype['setFlat'] = RichMarker.prototype.setFlat;
RichMarker.prototype.getFlat = function () {
    return (this.get('flat'));
};
RichMarker.prototype['getFlat'] = RichMarker.prototype.getFlat;
RichMarker.prototype.getWidth = function () {
    return (this.get('width'));
};
RichMarker.prototype['getWidth'] = RichMarker.prototype.getWidth;
RichMarker.prototype.getHeight = function () {
    return (this.get('height'));
};
RichMarker.prototype['getHeight'] = RichMarker.prototype.getHeight;
RichMarker.prototype.setShadow = function (shadow) {
    this.set('shadow', shadow);
    this.flat_changed();
};
RichMarker.prototype['setShadow'] = RichMarker.prototype.setShadow;
RichMarker.prototype.getShadow = function () {
    return (this.get('shadow'));
};
RichMarker.prototype['getShadow'] = RichMarker.prototype.getShadow;
RichMarker.prototype.flat_changed = function () {
    if (!this.ready_) {
        return;
    }
    this.markerWrapper_.style['boxShadow'] =
        this.markerWrapper_.style['webkitBoxShadow'] =
        this.markerWrapper_.style['MozBoxShadow'] =
        this.getFlat() ? '' : this.getShadow();
};
RichMarker.prototype['flat_changed'] = RichMarker.prototype.flat_changed;
RichMarker.prototype.setZIndex = function (index) {
    this.set('zIndex', index);
};
RichMarker.prototype['setZIndex'] = RichMarker.prototype.setZIndex;
RichMarker.prototype.getZIndex = function () {
    return (this.get('zIndex'));
};
RichMarker.prototype['getZIndex'] = RichMarker.prototype.getZIndex;
RichMarker.prototype.zIndex_changed = function () {
    if (this.getZIndex() && this.ready_) {
        this.markerWrapper_.style.zIndex = this.getZIndex();
    }
};
RichMarker.prototype['zIndex_changed'] = RichMarker.prototype.zIndex_changed;
RichMarker.prototype.getDraggable = function () {
    return (this.get('draggable'));
};
RichMarker.prototype['getDraggable'] = RichMarker.prototype.getDraggable;
RichMarker.prototype.setDraggable = function (draggable) {
    this.set('draggable', !! draggable);
};
RichMarker.prototype['setDraggable'] = RichMarker.prototype.setDraggable;
RichMarker.prototype.draggable_changed = function () {
    if (this.ready_) {
        if (this.getDraggable()) {
            this.addDragging_(this.markerWrapper_);
        } else {
            this.removeDragListeners_();
        }
    }
};
RichMarker.prototype['draggable_changed'] =
    RichMarker.prototype.draggable_changed;
RichMarker.prototype.getPosition = function () {
    return (this.get('position'));
};
RichMarker.prototype['getPosition'] = RichMarker.prototype.getPosition;
RichMarker.prototype.setPosition = function (position) {
    this.set('position', position);
};
RichMarker.prototype['setPosition'] = RichMarker.prototype.setPosition;
RichMarker.prototype.position_changed = function () {
    this.draw();
};
RichMarker.prototype['position_changed'] =
    RichMarker.prototype.position_changed;
RichMarker.prototype.getAnchor = function () {
    return (this.get('anchor'));
};
RichMarker.prototype['getAnchor'] = RichMarker.prototype.getAnchor;
RichMarker.prototype.setAnchor = function (anchor) {
    this.set('anchor', anchor);
};
RichMarker.prototype['setAnchor'] = RichMarker.prototype.setAnchor;
RichMarker.prototype.anchor_changed = function () {
    this.draw();
};
RichMarker.prototype['anchor_changed'] = RichMarker.prototype.anchor_changed;
RichMarker.prototype.htmlToDocumentFragment_ = function (htmlString) {
    var tempDiv = document.createElement('DIV');
    tempDiv.innerHTML = htmlString;
    if (tempDiv.childNodes.length == 1) {
        return (tempDiv.removeChild(tempDiv.firstChild));
    } else {
        var fragment = document.createDocumentFragment();
        while (tempDiv.firstChild) {
            fragment.appendChild(tempDiv.firstChild);
        }
        return fragment;
    }
};
RichMarker.prototype.removeChildren_ = function (node) {
    if (!node) {
        return;
    }
    var child;
    while (child = node.firstChild) {
        node.removeChild(child);
    }
};
RichMarker.prototype.setContent = function (content) {
    this.set('content', content);
};
RichMarker.prototype['setContent'] = RichMarker.prototype.setContent;
RichMarker.prototype.getContent = function () {
    return (this.get('content'));
};
RichMarker.prototype['getContent'] = RichMarker.prototype.getContent;
RichMarker.prototype.content_changed = function () {
    if (!this.markerContent_) {
        return;
    }
    this.removeChildren_(this.markerContent_);
    var content = this.getContent();
    if (content) {
        if (typeof content == 'string') {
            content = content.replace(/^\s*([\S\s]*)\b\s*$/, '$1');
            content = this.htmlToDocumentFragment_(content);
        }
        this.markerContent_.appendChild(content);
        var that = this;
        var images = this.markerContent_.getElementsByTagName('IMG');
        for (var i = 0, image; image = images[i]; i++) {
            google.maps.event.addDomListener(image, 'mousedown', function (e) {
                if (that.getDraggable()) {
                    if (e.preventDefault) {
                        e.preventDefault();
                    }
                    e.returnValue = false;
                }
            });
            google.maps.event.addDomListener(image, 'load', function () {
                that.draw();
            });
        }
        google.maps.event.trigger(this, 'domready');
    }
    if (this.ready_) {
        this.draw();
    }
};
RichMarker.prototype['content_changed'] = RichMarker.prototype.content_changed;
RichMarker.prototype.setCursor_ = function (whichCursor) {
    if (!this.ready_) {
        return;
    }
    var cursor = '';
    if (navigator.userAgent.indexOf('Gecko/') !== -1) {
        if (whichCursor == 'dragging') {
            cursor = '-moz-grabbing';
        }
        if (whichCursor == 'dragready') {
            cursor = '-moz-grab';
        }
        if (whichCursor == 'draggable') {
            cursor = 'pointer';
        }
    } else {
        if (whichCursor == 'dragging' || whichCursor == 'dragready') {
            cursor = 'move';
        }
        if (whichCursor == 'draggable') {
            cursor = 'pointer';
        }
    }
    if (this.markerWrapper_.style.cursor != cursor) {
        this.markerWrapper_.style.cursor = cursor;
    }
};
RichMarker.prototype.startDrag = function (e) {
    if (!this.getDraggable()) {
        return;
    }
    if (!this.dragging_) {
        this.dragging_ = true;
        var map = this.getMap();
        this.mapDraggable_ = map.get('draggable');
        map.set('draggable', false);
        this.mouseX_ = e.clientX;
        this.mouseY_ = e.clientY;
        this.setCursor_('dragready');
        this.markerWrapper_.style['MozUserSelect'] = 'none';
        this.markerWrapper_.style['KhtmlUserSelect'] = 'none';
        this.markerWrapper_.style['WebkitUserSelect'] = 'none';
        this.markerWrapper_['unselectable'] = 'on';
        this.markerWrapper_['onselectstart'] = function () {
            return false;
        };
        this.addDraggingListeners_();
        google.maps.event.trigger(this, 'dragstart');
    }
};
RichMarker.prototype.stopDrag = function () {
    if (!this.getDraggable()) {
        return;
    }
    if (this.dragging_) {
        this.dragging_ = false;
        this.getMap().set('draggable', this.mapDraggable_);
        this.mouseX_ = this.mouseY_ = this.mapDraggable_ = null;
        this.markerWrapper_.style['MozUserSelect'] = '';
        this.markerWrapper_.style['KhtmlUserSelect'] = '';
        this.markerWrapper_.style['WebkitUserSelect'] = '';
        this.markerWrapper_['unselectable'] = 'off';
        this.markerWrapper_['onselectstart'] = function () {};
        this.removeDraggingListeners_();
        this.setCursor_('draggable');
        google.maps.event.trigger(this, 'dragend');
        this.draw();
    }
};
RichMarker.prototype.drag = function (e) {
    if (!this.getDraggable() || !this.dragging_) {
        this.stopDrag();
        return;
    }
    var dx = this.mouseX_ - e.clientX;
    var dy = this.mouseY_ - e.clientY;
    this.mouseX_ = e.clientX;
    this.mouseY_ = e.clientY;
    var left = parseInt(this.markerWrapper_.style['left'], 10) - dx;
    var top = parseInt(this.markerWrapper_.style['top'], 10) - dy;
    this.markerWrapper_.style['left'] = left + 'px';
    this.markerWrapper_.style['top'] = top + 'px';
    var offset = this.getOffset_();
    var point = new google.maps.Point(left - offset.width, top - offset.height);
    var projection = this.getProjection();
    this.setPosition(projection.fromDivPixelToLatLng(point));
    this.setCursor_('dragging');
    google.maps.event.trigger(this, 'drag');
};
RichMarker.prototype.removeDragListeners_ = function () {
    if (this.draggableListener_) {
        google.maps.event.removeListener(this.draggableListener_);
        delete this.draggableListener_;
    }
    this.setCursor_('');
};
RichMarker.prototype.addDragging_ = function (node) {
    if (!node) {
        return;
    }
    var that = this;
    this.draggableListener_ =
        google.maps.event.addDomListener(node, 'mousedown', function (e) {
            that.startDrag(e);
        });
    this.setCursor_('draggable');
};
RichMarker.prototype.addDraggingListeners_ = function () {
    var that = this;
    if (this.markerWrapper_.setCapture) {
        this.markerWrapper_.setCapture(true);
        this.draggingListeners_ = [
            google.maps.event.addDomListener(this.markerWrapper_, 'mousemove', function (e) {
                that.drag(e);
            }, true),
            google.maps.event.addDomListener(this.markerWrapper_, 'mouseup', function () {
                that.stopDrag();
                that.markerWrapper_.releaseCapture();
            }, true)
        ];
    } else {
        this.draggingListeners_ = [
            google.maps.event.addDomListener(window, 'mousemove', function (e) {
                that.drag(e);
            }, true),
            google.maps.event.addDomListener(window, 'mouseup', function () {
                that.stopDrag();
            }, true)
        ];
    }
};
RichMarker.prototype.removeDraggingListeners_ = function () {
    if (this.draggingListeners_) {
        for (var i = 0, listener; listener = this.draggingListeners_[i]; i++) {
            google.maps.event.removeListener(listener);
        }
        this.draggingListeners_.length = 0;
    }
};
RichMarker.prototype.getOffset_ = function () {
    var anchor = this.getAnchor();
    if (typeof anchor == 'object') {
        return (anchor);
    }
    var offset = new google.maps.Size(0, 0);
    if (!this.markerContent_) {
        return offset;
    }
    var width = this.markerContent_.offsetWidth;
    var height = this.markerContent_.offsetHeight;
    switch (anchor) {
    case RichMarkerPosition['TOP_LEFT']:
        break;
    case RichMarkerPosition['TOP']:
        offset.width = -width / 2;
        break;
    case RichMarkerPosition['TOP_RIGHT']:
        offset.width = -width;
        break;
    case RichMarkerPosition['LEFT']:
        offset.height = -height / 2;
        break;
    case RichMarkerPosition['MIDDLE']:
        offset.width = -width / 2;
        offset.height = -height / 2;
        break;
    case RichMarkerPosition['RIGHT']:
        offset.width = -width;
        offset.height = -height / 2;
        break;
    case RichMarkerPosition['BOTTOM_LEFT']:
        offset.height = -height;
        break;
    case RichMarkerPosition['BOTTOM']:
        offset.width = -width / 2;
        offset.height = -height;
        break;
    case RichMarkerPosition['BOTTOM_RIGHT']:
        offset.width = -width;
        offset.height = -height;
        break;
    }
    return offset;
};
RichMarker.prototype.onAdd = function () {
    if (!this.markerWrapper_) {
        this.markerWrapper_ = document.createElement('DIV');
        this.markerWrapper_.style['position'] = 'absolute';
    }
    if (this.getZIndex()) {
        this.markerWrapper_.style['zIndex'] = this.getZIndex();
    }
    this.markerWrapper_.style['display'] = this.getVisible() ? '' : 'none';
    if (!this.markerContent_) {
        this.markerContent_ = document.createElement('DIV');
        this.markerWrapper_.appendChild(this.markerContent_);
        var that = this;
        google.maps.event.addDomListener(this.markerContent_, 'click', function (e) {
            google.maps.event.trigger(that, 'click');
        });
        google.maps.event.addDomListener(this.markerContent_, 'mouseover', function (e) {
            google.maps.event.trigger(that, 'mouseover');
        });
        google.maps.event.addDomListener(this.markerContent_, 'mouseout', function (e) {
            google.maps.event.trigger(that, 'mouseout');
        });
    }
    this.ready_ = true;
    this.content_changed();
    this.flat_changed();
    this.draggable_changed();
    var panes = this.getPanes();
    if (panes) {
        panes.overlayMouseTarget.appendChild(this.markerWrapper_);
    }
    google.maps.event.trigger(this, 'ready');
};
RichMarker.prototype['onAdd'] = RichMarker.prototype.onAdd;
RichMarker.prototype.draw = function () {
    if (!this.ready_ || this.dragging_) {
        return;
    }
    var projection = this.getProjection();
    if (!projection) {
        return;
    }
    var latLng = (this.get('position'));
    var pos = projection.fromLatLngToDivPixel(latLng);
    var offset = this.getOffset_();
    this.markerWrapper_.style['top'] = (pos.y + offset.height) + 'px';
    this.markerWrapper_.style['left'] = (pos.x + offset.width) + 'px';
    var height = this.markerContent_.offsetHeight;
    var width = this.markerContent_.offsetWidth;
    if (width != this.get('width')) {
        this.set('width', width);
    }
    if (height != this.get('height')) {
        this.set('height', height);
    }
};
RichMarker.prototype['draw'] = RichMarker.prototype.draw;
RichMarker.prototype.onRemove = function () {
    if (this.markerWrapper_ && this.markerWrapper_.parentNode) {
        this.markerWrapper_.parentNode.removeChild(this.markerWrapper_);
    }
    this.removeDragListeners_();
};
RichMarker.prototype['onRemove'] = RichMarker.prototype.onRemove;
var RichMarkerPosition = {
    'TOP_LEFT': 1,
    'TOP': 2,
    'TOP_RIGHT': 3,
    'LEFT': 4,
    'MIDDLE': 5,
    'RIGHT': 6,
    'BOTTOM_LEFT': 7,
    'BOTTOM': 8,
    'BOTTOM_RIGHT': 9
};
window['RichMarkerPosition'] = RichMarkerPosition; </script>
<script language="javascript">
function toggle() {
var ele = document.getElementById("Info");
if(ele.style.display == "block") { 
	ele.style.display = "none";
	}
else {
	ele.style.display = "block";
}
}
</script>
<script language="javascript">
  function gotoLocation(Lat, Lang, lbltext) {
      var image = document.getElementById("MarkerImage").value;
      var latlng = new google.maps.LatLng(Lat, Lang);
      var marker = new google.maps.Marker({
          position: latlng,
          map: map,
          title: Lat + ',' + Lang,
          icon: image
      });
      RealTimeMarkerArray.push(marker);
      var Markerlabel = new Label({
          map: map
      });
      Markerlabel.bindTo('position', marker, 'position');
      Markerlabel.set('text', lbltext);
      RealTimeLabelArray.push(Markerlabel);
  }

  function strToArray(str) {
      var latlng;
      latLngs = [],
      pairs = str.replace(/^\(|\)$/g, '').split('),(');
      for (var i = 0, pair; pair = pairs[i]; i++) {
          pair = pair.split(',');
          latlng = new google.maps.LatLng(pair[0], pair[1]);
          latLngs.push(latlng);
      }
      return latLngs;
  }
  
  function stringToArray(str) {
      var array = [];
      array = str.split(',');
      return array;
  }
  
  var TrackingReplayObjectArray = [];
  function addTrackingReplayArray(Arr, SpeedStr, AColor) {
      var TrackingReplayObj = [];
      var SpeedTrackingReplayArray = [];
      SpeedTrackingReplayArray = SpeedStr.split(',');
      var pathTrackingReplay = [];
      pathTrackingReplay.length = 0;
      var latlng;
      pairs = Arr.replace(/^\(|\)$/g, '').split('),(');
      for (var i = 0, pair; pair = pairs[i]; i++) {
          pair = pair.split(',');
          latlng = new google.maps.LatLng(pair[0], pair[1]);
          pathTrackingReplay.push(latlng);
      }
      TrackingReplayObj.push(pathTrackingReplay);
      TrackingReplayObj.push(SpeedTrackingReplayArray);
      applyTrackingReplay(TrackingReplayObj, AColor)
  }

  function applyTrackingReplay(obj, AColor) {
      var TrackingReplayArray = [];
      var lineSymbol = {
          path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW
      };
      var TrackingReplayOptions = {
          strokeColor: AColor,
          strokeOpacity: 1,
          strokeWeight: 2
      };
      for (var i = 1; i < obj[0].length; i++) {
          if (obj[0].length - i != 1) {
              var TrackingReplay = new google.maps.Polyline(TrackingReplayOptions);
              TrackingReplay.setOptions({
                  path: [obj[0][i - 1], obj[0][i]]
              });
              if ((parseFloat(obj[1][i]) > 0) &&
                  (obj[0][i].equals(obj[0][i - 1]) == false)) {
                  TrackingReplay.setOptions({
                      icons: [{
                          icon: lineSymbol,
                          offset: '100%'
                      }]
                  });
              } else {
                  TrackingReplay.setOptions({
                      icons: [{}]
                  });
              }
              TrackingReplay.setMap(map);
              TrackingReplayArray.push(TrackingReplay);
          } else {
              var TrackingReplay = new google.maps.Polyline(TrackingReplayOptions);
              TrackingReplay.setOptions({
                  path: [obj[0][i - 1], obj[0][i]]
              });
              if ((parseFloat(obj[1][i]) > 0) &&
                  (obj[0][i].equals(obj[0][i - 1]) == false)) {
                  TrackingReplay.setOptions({
                      icons: [{
                          icon: lineSymbol,
                          offset: '100%'
                      }]
                  });
              } else {
                  TrackingReplay.setOptions({
                      icons: [{}]
                  });
              }
              TrackingReplay.setMap(map);
              TrackingReplayArray.push(TrackingReplay);
          }
      }
      obj.push(TrackingReplayArray);
      var MarkersTrackingReplayArray = [];
      var TrackingReplayLabelArray = [];
      obj.push(MarkersTrackingReplayArray);
      obj.push(TrackingReplayLabelArray);
      TrackingReplayObjectArray.push(obj);
  }

  function HideTrackingReplayArrow(oidx) {
      if (TrackingReplayObjectArray[oidx][2]) {
          for (i in TrackingReplayObjectArray[oidx][2]) {
              TrackingReplayObjectArray[oidx][2][i].setOptions({
                  icons: [{}]
              });
          }
      }
  }

  function ShowTrackingReplayArrow(oidx) {
      var lineSymbol = {
          path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW
      };
      if (TrackingReplayObjectArray[oidx][2]) {
          for (i in TrackingReplayObjectArray[oidx][2]) {
              TrackingReplayObjectArray[oidx][2][i].setOptions({
                  icons: [{
                      icon: lineSymbol,
                      offset: '100%'
                  }]
              });
          }
      }
  }

  function ColoringTrackingReplay(oidx, Acolor) {
      var TrackingReplayOptions = {
          strokeColor: Acolor,
          strokeOpacity: 1,
          strokeWeight: 2
      };
      if (TrackingReplayObjectArray[oidx][2]) {
          for (i in TrackingReplayObjectArray[oidx][2]) {
              TrackingReplayObjectArray[oidx][2][i].setOptions(TrackingReplayOptions);
          }
      }
  }

  function clearTrackingReplay(oidx) {
      if (TrackingReplayObjectArray[oidx][3]) {
          for (i in TrackingReplayObjectArray[oidx][3]) {
              TrackingReplayObjectArray[oidx][3][i].setMap(null);
          }
      }
      if (TrackingReplayObjectArray[oidx][2]) {
          for (i in TrackingReplayObjectArray[oidx][2]) {
              TrackingReplayObjectArray[oidx][2][i].setMap(null);
          }
      }
      clearMarkersTrackingReplay(oidx);
  }

  function showTrackingReplay(oidx) {
      if (TrackingReplayObjectArray[oidx][3]) {
          for (i in TrackingReplayObjectArray[oidx][3]) {
              TrackingReplayObjectArray[oidx][3][i].setMap(map);
          }
      }
      if (TrackingReplayObjectArray[oidx][2]) {
          for (i in TrackingReplayObjectArray[oidx][2]) {
              TrackingReplayObjectArray[oidx][2][i].setMap(map);
          }
      }
      showMarkersTrackingReplay(oidx);
  }

  function deleteTrackingReplay(oidx) {
      if (TrackingReplayObjectArray[oidx][3]) {
          for (i in TrackingReplayObjectArray[oidx][3]) {
              TrackingReplayObjectArray[oidx][3][i].setMap(null);
          }
      }
      if (TrackingReplayObjectArray[oidx][2]) {
          for (i in TrackingReplayObjectArray[oidx][2]) {
              TrackingReplayObjectArray[oidx][2][i].setMap(null);
          }
      }
      deleteMarkersTrackingReplay(oidx);
      TrackingReplayObjectArray[oidx][0].length = 0;
      TrackingReplayObjectArray[oidx][1].length = 0;
      TrackingReplayObjectArray[oidx][2].length = 0;
      TrackingReplayObjectArray[oidx][3].length = 0;
      TrackingReplayObjectArray[oidx][4].length = 0;
  }

  function addMarkerTrackingReplay(i, oidx, TrackingReplaylbl, ori, speed, speedlimit, img, trackV) {
      if (parseFloat(speed) > 2) {
          if (parseFloat(speed) <= parseFloat(speedlimit)) {
              var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/car/icon_' + img + '_driver.gif';
          } else if (parseFloat(speed) > parseFloat(speedlimit)) {
              var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/car/icon_' + img + '_alarm.gif';
          }
      } else {
          var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/car/icon_' + img + '_stop.gif';
      }
      var richMarkerContent = document.createElement('div');
      var arrowImage = new Image();
      arrowImage.src = image;
      var directionDeg = parseFloat(ori);
      var labelElement = document.createElement('div');
      labelElement.innerHTML = TrackingReplaylbl;
      labelElement.style.cssText = 'white-space: border: 0px; font-family:arial; font-weight:bold;color:#00F;padding: 0px;top:10px;position: relative; opacity: .75; filter: alpha(opacity=75); -ms-filter: alpha(opacity=75); -khtml-opacity: .75;-moz-opacity: .75;';
      var rotationElement = document.createElement('div');
      var rotationStyles = 'display:block;' +
          'position: relative;' +
          '-ms-transform:      rotate(%rotationdeg);' +
          '-o-transform:       rotate(%rotationdeg);' +
          '-moz-transform:     rotate(%rotationdeg);' +
          '-webkit-transform:  rotate(%rotationdeg);' +
          'left:5px;top:24px;width:50px;height:50px';
      rotationStyles = rotationStyles.split('%rotation').join(directionDeg);
      rotationElement.style.cssText = rotationStyles;
      rotationElement.setAttribute('alt', 'arrow');
      rotationElement.appendChild(arrowImage);
      richMarkerContent.appendChild(labelElement);
      richMarkerContent.appendChild(rotationElement);
      var marker = new RichMarker({
          position: TrackingReplayObjectArray[oidx][0][i],
          map: map,
          flat: true,
          content: richMarkerContent.innerHTML
      });
      if (trackV == '1') {
          map.setCenter(TrackingReplayObjectArray[oidx][0][i]);
      }
      TrackingReplayObjectArray[oidx][3].push(marker);
  }

  function showMarkersTrackingReplay(loc) {
      if (TrackingReplayObjectArray[loc][3]) {
          for (i in TrackingReplayObjectArray[loc][3]) {
              TrackingReplayObjectArray[loc][3][i].setMap(map);
          }
      }
  }

  function clearMarkersTrackingReplay(loc) {
      if (TrackingReplayObjectArray[loc][3]) {
          for (i in TrackingReplayObjectArray[loc][3]) {
              TrackingReplayObjectArray[loc][3][i].setMap(null);
          }
      }
  }

  function deleteMarkersTrackingReplay(loc) {
      if (TrackingReplayObjectArray[loc][3]) {
          for (i in TrackingReplayObjectArray[loc][3]) {
              TrackingReplayObjectArray[loc][3][i].setMap(null);
          }
          TrackingReplayObjectArray[loc][3].length = 0;
      }
  }

  function removeTrackingReplay() {
      for (i in TrackingReplayObjectArray) {
          deleteTrackingReplay(i);
      }
      TrackingReplayObjectArray.length = 0;
  }
  var geoPathsArr = [];
  var geoMarkerssArr = [];
  var geoPolyArr = [];
  var geoPolygonArr = [];

  function geoFencePolygon() {
      var isClosed = false;
      var poly = new google.maps.Polyline({
          map: map,
          path: [],
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 2
      });
      geoPolyArr.push(poly);
      google.maps.event.addListener(map, 'click', function (clickEvent) {
          if (isClosed)
              return;
          var isFirstMarker = poly.getPath().length === 0;
          var marker = new google.maps.Marker({
              map: map,
              position: clickEvent.latLng,
              draggable: true
          });
          geoMarkerssArr.push(marker);
          google.maps.event.addListener(marker, 'click', function () {
              if (isClosed)
                  return;
              var path = poly.getPath();
              poly.setMap(null);
              var Polygon = new google.maps.Polygon({
                  map: map,
                  path: path,
                  strokeColor: "#FF0000",
                  strokeOpacity: 0.8,
                  strokeWeight: 2,
                  fillColor: "#FF0000",
                  fillOpacity: 0.35
              });
              isClosed = true;
              geoPolygonArr.push(Polygon);
          });
          google.maps.event.addListener(marker, 'drag', function (dragEvent) {
              poly.getPath().setAt(marker, dragEvent.latLng);
          });
          poly.getPath().push(clickEvent.latLng);
      });
      geoPathsArr.length = 0;
      geoPathsArr.push(poly.getPath().getArray());
  }

  function T1deleteGeoFence() {
      if (geoPolygonArr) {
          for (i in geoPolygonArr) {
              geoPolygonArr[i].setMap(null);
          }
          geoPolygonArr.length = 0;
      }
      if (geoMarkerssArr) {
          for (i in geoMarkerssArr) {
              geoMarkerssArr[i].setMap(null);
          }
          geoMarkerssArr.length = 0;
      }
      if (geoPolyArr) {
          for (i in geoPolyArr) {
              geoPolyArr[i].setMap(null);
          }
          geoPolyArr.length = 0;
      }
      geoPathsArr.length = 0;
  }

  function T1HideGeoFence() {
      if (geoPolygonArr) {
          for (i in geoPolygonArr) {
              geoPolygonArr[i].setMap(null);
          }
      }
      if (geoMarkerssArr) {
          for (i in geoMarkerssArr) {
              geoMarkerssArr[i].setMap(null);
          }
      }
      if (geoPolyArr) {
          for (i in geoPolyArr) {
              geoPolyArr[i].setMap(null);
          }
      }
  }

  function T1ShowGeoFence() {
      if (geoPolygonArr) {
          for (i in geoPolygonArr) {
              geoPolygonArr[i].setMap(map);
          }
      }
      if (geoMarkerssArr) {
          for (i in geoMarkerssArr) {
              geoMarkerssArr[i].setMap(map);
          }
      }
      if (geoPolyArr) {
          for (i in geoPolyArr) {
              geoPolyArr[i].setMap(map);
          }
      }
  }

  function geoPathscomputeArea() {
      alert(g.computeArea(geoPathsArr[0], radius).toFixed(2));
  }
  var polyT2;
  var markersT2 = [];
  var pathT2 = new google.maps.MVCArray;
  var pathsT2 = new google.maps.MVCArray;
  var PolygonT2;

  function EnablePolygonType2() {
      pathsT2 = new google.maps.MVCArray([pathT2]);
      PolygonT2 = new google.maps.Polygon({
          strokeWeight: 3,
          fillColor: '#5555FF'
      });
      geoPolygonArr.push(PolygonT2);
      PolygonT2.setMap(map);
      PolygonT2.setPaths(pathsT2);
      google.maps.event.addListener(map, 'click', addPolygonType2);
  }

  function addPolygonType2(event) {
      pathT2.insertAt(pathT2.length, event.latLng);
      var marker = new google.maps.Marker({
          position: event.latLng,
          map: map,
          draggable: true
      });
      markersT2.push(marker);
      marker.setTitle("#" + pathT2.length);
      geoMarkerssArr.push(marker);
      google.maps.event.addListener(marker, 'click', function () {
          marker.setMap(null);
          for (var i = 0, I = markersT2.length; i < I && markersT2[i] != marker; ++i);
          markersT2.splice(i, 1);
          pathT2.removeAt(i);
      });
      google.maps.event.addListener(marker, 'dragend', function () {
          for (var i = 0, I = markersT2.length; i < I && markersT2[i] != marker; ++i);
          pathT2.setAt(i, marker.getPosition());
      });
      geoPathsArr.push(PolygonT2.getPath().getArray());
  }

  function T2deleteGeoFence() {
      pathsT2.clear();
      pathT2.clear();
      if (geoPolygonArr) {
          for (i in geoPolygonArr) {
              geoPolygonArr[i].setMap(null);
          }
          geoPolygonArr.length = 0;
      }
      if (markersT2) {
          for (i in markersT2) {
              markersT2[i].setMap(null);
          }
          markersT2.length = 0;
      }
      if (geoMarkerssArr) {
          for (i in geoMarkerssArr) {
              geoMarkerssArr[i].setMap(null);
          }
          geoMarkerssArr.length = 0;
      }
      if (geoPolyArr) {
          for (i in geoPolyArr) {
              geoPolyArr[i].setMap(null);
          }
          geoPolyArr.length = 0;
      }
      geoPathsArr.length = 0;
  }

  function T2HideGeoFence() {
      if (geoPolygonArr) {
          for (i in geoPolygonArr) {
              geoPolygonArr[i].setMap(null);
          }
      }
      if (markersT2) {
          for (i in markersT2) {
              markersT2[i].setMap(null);
          }
      }
      if (geoMarkerssArr) {
          for (i in geoMarkerssArr) {
              geoMarkerssArr[i].setMap(null);
          }
      }
      if (geoPolyArr) {
          for (i in geoPolyArr) {
              geoPolyArr[i].setMap(null);
          }
      }
  }

  function T2ShowGeoFence() {
      if (geoPolygonArr) {
          for (i in geoPolygonArr) {
              geoPolygonArr[i].setMap(map);
              PolygonT2.setPaths(pathsT2)
          }
      }
      if (markersT2) {
          for (i in markersT2) {
              markersT2[i].setMap(map);
          }
      }
      if (geoMarkerssArr) {
          for (i in geoMarkerssArr) {
              geoMarkerssArr[i].setMap(map);
          }
      }
      if (geoPolyArr) {
          for (i in geoPolyArr) {
              geoPolyArr[i].setMap(map);
          }
      }
  }
  var getMarkerPOIArray = [];
  var getLabelPOIArray = [];

  function getPOILocation(Lat, Lang, lbltext, img) {
      //  var image = new Image();           
      var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/POIS/' + img + '.png';
      var latlng = new google.maps.LatLng(Lat, Lang);
      var marker = new google.maps.Marker({
          position: latlng,
          map: map,
          title: Lat + ',' + Lang,
          icon: image
      });
      getMarkerPOIArray.push(marker);
      var Markerlabel = new Label({
          map: map
      });
      Markerlabel.bindTo('position', marker, 'position');
      Markerlabel.set('text', lbltext);
      getLabelPOIArray.push(Markerlabel);
  }

  function DeletePOILocation() {
      if (getMarkerPOIArray) {
          for (i in getMarkerPOIArray) {
              getMarkerPOIArray[i].setMap(null);
          }
          getMarkerPOIArray.length = 0;
      }
      if (getLabelPOIArray) {
          for (i in getLabelPOIArray) {
              getLabelPOIArray[i].setMap(null);
          }
          getLabelPOIArray.length = 0;
      }
  };
  if (!google.maps.Polygon.prototype.getBounds) {
      google.maps.Polygon.prototype.getBounds = function (latLng) {
          var bounds = new google.maps.LatLngBounds();
          var paths = this.getPaths();
          var path;
          for (var p = 0; p < paths.getLength(); p++) {
              path = paths.getAt(p);
              for (var i = 0; i < path.getLength(); i++) {
                  bounds.extend(path.getAt(i));
              }
          }
          return bounds;
      }
  }

  function create_geoFencePolygon(paths, multiple) {
      try {
          var pathsArr = strToArray(paths);
          if (multiple == 1) {
              T1deleteGeoFence();
              T2deleteGeoFence();
          }
          var Polygon = new google.maps.Polygon({
              map: map,
              path: pathsArr,
              strokeColor: "#FF0000",
              strokeOpacity: 0.8,
              strokeWeight: 2,
              fillColor: "#FF0000",
              fillOpacity: 0.35
          });
          Polygon.setMap(map);
          geoPolygonArr.push(Polygon);
      } catch (err) {}
  }

  function strToArray(str) {
      var latlng;
      latLngs = [],
      pairs = str.replace(/^\(|\)$/g, '').split('),(');
      for (var i = 0, pair; pair = pairs[i]; i++) {
          pair = pair.split(',');
          latlng = new google.maps.LatLng(pair[0], pair[1]);
          latLngs.push(latlng);
      }
      return latLngs;
  }

  function strTobounds(str) {
      var latlngbounds = new google.maps.LatLngBounds();
      pairs = str.replace(/^\(|\)$/g, '').split('),(');
      for (var i = 0, pair; pair = pairs[i]; i++) {
          pair = pair.split(',');
          var latlng = new google.maps.LatLng(pair[0], pair[1]);
          latlngbounds.extend(latlng);
      }
      return latlngbounds;
  }

  function removeByIndex(arrayName, arrayIndex) {
      arrayName.splice(arrayIndex, 1);
      return false;
  }

  function ZoomToPolygon(paths) {
      map.fitBounds(strTobounds(paths));
  }
  var RealTimeMarkerArray = [];
  var RealTimeLabelArray = [];
  var RealTimeTextArray = [];
  var RealTimeUnitIDArray = [];

  function get_realtimeTracker(UnitID, lat, lon, lbl, img, AlarmImg, dir, trackable) {
          var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/car/'+img;
      var richMarkerContent = document.createElement('div');
      var arrowImage = new Image();
      arrowImage.src = image;
      if (AlarmImg != 'none') {
          var AlarmImage = new Image();
          AlarmImage.src = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/alarmsicons/'+AlarmImg;
      }
      var AlarmImageStyles = 'display:block;' +
          'position: absolute;' +
          'left:5px;top:25px;width:15px;height:15px';
      var directionDeg = dir;
      var rotationElement = document.createElement('div');
      var rotationStyles = 'display:block;' +
          'position: relative;' +
          '-ms-transform:      rotate(%rotationdeg);' +
          '-o-transform:       rotate(%rotationdeg);' +
          '-moz-transform:     rotate(%rotationdeg);' +
          '-webkit-transform:  rotate(%rotationdeg);' +
          'left:5px;top:24px;width:50px;height:50px';
      rotationStyles = rotationStyles.split('%rotation').join(directionDeg);
      rotationElement.style.cssText = rotationStyles;
      rotationElement.setAttribute('alt', 'arrow');
      rotationElement.appendChild(arrowImage);
      var labelElement = document.createElement('div');
      labelElement.innerHTML = lbl;
      labelElement.style.cssText = 'white-space: border: 0px; font-family:arial; font-weight:bold;color:#00F;padding: 0px;top:10px;position: relative; opacity: .75; filter: alpha(opacity=75); -ms-filter: alpha(opacity=75); -khtml-opacity: .75;-moz-opacity: .75;';
      if (AlarmImg != 'none') {
          AlarmImage.setAttribute('style', AlarmImageStyles);
          richMarkerContent.appendChild(AlarmImage);
      }
      richMarkerContent.appendChild(labelElement);
      richMarkerContent.appendChild(rotationElement);
      var latlng = new google.maps.LatLng(lat, lon);
      var marker = new RichMarker({
          position: latlng,
          map: map,
          flat: true,
          content: richMarkerContent.innerHTML
      });
      if (trackable == '1') {
          map.setCenter(latlng);
      }
      RealTimeMarkerArray.push(marker);
      RealTimeUnitIDArray.push(UnitID);
  }

  function RealTimeSetCenter(lat, lon) {
      var latlng = new google.maps.LatLng(lat, lon);
      map.setCenter(latlng);
  }

  function RealTimeZoomTo(Value) {
      map.setZoom(Value);
  }

  function RealTimeGeoCode(lat, lng) {
      var latlng = new google.maps.LatLng(lat, lng);
      geocoder.geocode({
          'latLng': latlng
      }, function (results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
              if (results[1]) {
                  document.getElementById("realaddress").value = results[1].formatted_address;
              } else {
                  document.getElementById("realaddress").value = "No results found";
              }
          } else {
              document.getElementById("realaddress").value = "Geocoder failed due to: " + status;
          }
      });
  }

  function DeleteOneRealTime(ID) {
      if (RealTimeUnitIDArray) {
          for (i in RealTimeUnitIDArray) {
              if (RealTimeUnitIDArray[i] == ID) {
                  RealTimeMarkerArray[i].setMap(null);
                  removeByIndex(RealTimeMarkerArray, i);
                  removeByIndex(RealTimeUnitIDArray, i);
              }
          }
      }
  }

  function DeleteRealTime() {
      if (RealTimeUnitIDArray) {
          for (i in RealTimeUnitIDArray) {
              RealTimeMarkerArray[i].setMap(null);
          }
          RealTimeMarkerArray.length = 0;
          RealTimeLabelArray.length = 0;
          RealTimeTextArray.length = 0;
          RealTimeUnitIDArray.length = 0;
      }
  }               
</script>
<script type='text/javascript'> 
  function POIClass() {
      this.imageCode = 0;
      this.nameCode = "";
      this.POIIDSArray = [];
      this.POILatArray = [];
      this.POILonArray = [];
      this.POINameArray = [];
      this.POIImgArray = [];
      this.POIDescArray = [];
      this.google_PoiLabelArray = [];
      this.google_MarkersPOIArray = [];
      this.google_getMarkerPOIArray = [];
      this.google_getLabelPOIArray = [];
      this.DrawPOILayer;
      this.rotationStyles = 'display:block;' +
          'left:0px;top:24px;width:50px;height:50px' +
          'position: relative;' +
          '-ms-transform:      rotate(%rotationdeg);' +
          '-o-transform:       rotate(%rotationdeg);' +
          '-moz-transform:     rotate(%rotationdeg);' +
          '-moz-transform-origin: 50% 50%;' +
          '-webkit-transform:  rotate(%rotationdeg);' +
          '-webkit-transform-origin: 50% 50%;';
      this.TextStyle = "white-space:border: 0px;" +
          "font-family:arial;font-weight:bold;color:#00F;" +
          "padding: 2px;" + "opacity: .75; " +
          "filter: alpha(opacity=75); " +
          '-ms-filter: "alpha(opacity=75)"; ' +
          "-khtml-opacity: .75; " + "-moz-opacity: .75;"
      this.reset = function () {
          this.POIIDSArray.length = 0;
          this.POILatArray.length = 0;
          this.POILonArray.length = 0;
          this.POINameArray.length = 0;
          this.POIImgArray.length = 0;
          this.POIDescArray.length = 0;
      };
      this.EnableMarkerPOI = function (q, code) {
          if (MapClass.currMap == 'gmap') {
              this.google_EnableMarkerPOI(q, code);
          } else if (MapClass.currMap == 'omap') {
              this.osm_EnableMarkerPOI(q, code);
          }
      };
      this.deleteMarkersPOI = function () {
          if (MapClass.currMap == 'gmap') {
              this.google_deleteMarkersPOI();
          } else if (MapClass.currMap == 'omap') {
              this.osm_deleteMarkersPOI();
          }
      }
      this.setPOI = function (imgcode, namecode) {
          this.imageCode = imgcode;
          this.nameCode = namecode;
      }
      this.google_EnableMarkerPOI = function () {
          var _this = this;
          google.maps.event.addListener(map, 'click', function (event) {
              _this.google_DeletePOILocation();
              _this.google_deleteMarkersPOI();
              var image = 'file:///C:/Users/Ralph/Downloads/app/fmr/images/pois/' + _this.imageCode + '.png';
              var marker = new google.maps.Marker({
                  position: event.latLng,
                  map: map,
                  icon: image
              });
              var latlong = event.latLng;
              _this.google_MarkersPOIArray.push(marker);

              document.getElementById("poilat").value = latlong.lat();
              document.getElementById("poilng").value = latlong.lng();
              var Markerlabel = new Label({
                  map: map
              });
              Markerlabel.bindTo('position', marker, 'position');
              Markerlabel.set('text', _this.nameCode);
              _this.google_PoiLabelArray.push(Markerlabel);

          });
      };
      this.disableMarkerPoi = function () {
          if (MapClass.currMap == 'gmap') {
              google.maps.event.clearListeners(map, 'click');
          } else if (MapClass.currMap == 'omap') {

          }
      }
      this.disable_google = function () {
          google.maps.event.clearListeners(map, 'click');
      }
      this.google_showMarkersPOI = function () {
          if (this.google_MarkersPOIArray) {
              for (i in this.google_MarkersPOIArray) {
                  this.google_MarkersPOIArray[i].setMap(map);
              }
          }
      };
      this.google_clearMarkersPOI = function () {
          if (this.google_MarkersPOIArray) {
              for (i in this.google_MarkersPOIArray) {
                  this.google_MarkersPOIArray[i].setMap(null);
              }
          }
      };
      this.google_deleteMarkersPOI = function () {
          if (this.google_MarkersPOIArray) {
              for (i in this.google_MarkersPOIArray) {
                  this.google_MarkersPOIArray[i].setMap(null);
              }
              this.google_MarkersPOIArray.length = 0;
          }
          if (this.google_PoiLabelArray) {
              for (i in this.google_PoiLabelArray) {
                  this.google_PoiLabelArray[i].setMap(null);
              }
              this.google_PoiLabelArray.length = 0;
          }
      };
      this.osm_EnableMarkerPOI = function (code) {
          var _this = this;
          this.DrawPOILayer = new OpenLayers.Layer.Markers("POI Drawing");
          this.DrawPOILayer.id = "POIDrwing";
          osmmaps[MapClass.currMapID].addLayer(this.DrawPOILayer);
          osmmaps[MapClass.currMapID].events.register("click", osmmaps[MapClass.currMapID], function (e) {
              _this.DrawPOILayer.clearMarkers();
              var size = new OpenLayers.Size(25, 25);
              var offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);
              var icon = new OpenLayers.Icon(null, size, offset);
              var richMarkerContent = document.createElement('div');
              var arrowImage = new Image();
              arrowImage.src = DefaultSettings.poiimgsrc + $('#' + code + 'img').val() + '.png';
              var directionDeg = 0;
              var rotationElement = document.createElement('div');
              var rotationStyles = _this.rotationStyles;
              rotationStyles = rotationStyles.split('%rotation').join(directionDeg);
              rotationElement.setAttribute('style', rotationStyles);
              rotationElement.setAttribute('alt', 'arrow');
              rotationElement.appendChild(arrowImage);
              var TextElement = document.createElement('div');
              TextElement.innerHTML = $('#' + code + 'name').val();
              TextElement.style.cssText = _this.TextStyle;
              rotationElement.appendChild(TextElement);
              richMarkerContent.appendChild(rotationElement);

              icon.imageDiv = richMarkerContent;

              var lonlat = osmmaps[MapClass.currMapID].getLonLatFromPixel(e.xy);
              var pos = osmmaps[MapClass.currMapID].getLonLatFromPixel(e.xy).transform(osmmaps[MapClass.currMapID].baseLayer.projection, new OpenLayers.Projection("EPSG:4326"));
              var marker = new OpenLayers.Marker(lonlat, icon);
              _this.DrawPOILayer.addMarker(marker);
              $('#' + code + 'lat').val(pos.lat);
              $('#' + code + 'long').val(pos.lon);
          });
      };
      this.osm_deleteMarkersPOI = function () {
          this.DrawPOILayer.clearMarkers();
          osmmaps[MapClass.currMapID].removeLayer(this.DrawPOILayer);
      };
      this.getPOILocation = function (Lat, Lang, lbltext, image) {
          if (MapClass.currMap == 'gmap') {
              this.google_getPOILocation(Lat, Lang, lbltext, image);
          } else if (MapClass.currMap == 'omap') {
              this.osm_getPOILocation(Lat, Lang, lbltext, image);
          }
      }
      this.DeletePOILocation = function () {
          if (MapClass.currMap == 'gmap') {
              this.google_DeletePOILocation();
          } else if (MapClass.currMap == 'omap') {
              this.osm_DeletePOILocation();
          }
      }
      this.google_getPOILocation = function (Lat, Lang, lbltext, image) {
          var latlng = new google.maps.LatLng(Lat, Lang);
          var marker = new google.maps.Marker({
              position: latlng,
              map: map,
              title: Lat + ',' + Lang,
              icon: 'file:///C:/Users/Ralph/Downloads/app/fmr/images/pois/' + image + '.png'
          });
          this.google_getMarkerPOIArray.push(marker);
          var Markerlabel = new Label({
              map: map
          });
          Markerlabel.bindTo('position', marker, 'position');
          Markerlabel.set('text', lbltext);
          this.google_getLabelPOIArray.push(Markerlabel);
      };
      this.google_DeletePOILocation = function () {
          if (this.google_getMarkerPOIArray) {
              for (i in this.google_getMarkerPOIArray) {
                  this.google_getMarkerPOIArray[i].setMap(null);
              }
              this.google_getMarkerPOIArray.length = 0;
          }
          if (this.google_getLabelPOIArray) {
              for (i in this.google_getLabelPOIArray) {
                  this.google_getLabelPOIArray[i].setMap(null);
              }
              this.google_getLabelPOIArray.length = 0;
          }
      };
      this.osm_getPOILocation = function (Lat, Lon, lbltext, image) {
          var size = new OpenLayers.Size(25, 25);
          var offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);
          var icon = new OpenLayers.Icon(null, size, offset);
          var richMarkerContent = document.createElement('div');

          var arrowImage = new Image();
          arrowImage.src = DefaultSettings.poiimgsrc + image + '.png';
          var directionDeg = 0;
          var rotationElement = document.createElement('div');
          var rotationStyles = this.rotationStyles;
          rotationStyles = rotationStyles.split('%rotation').join(directionDeg);
          rotationElement.setAttribute('style', rotationStyles);
          rotationElement.setAttribute('alt', 'arrow');
          rotationElement.appendChild(arrowImage);
          var TextElement = document.createElement('div');
          TextElement.innerHTML = lbltext;
          TextElement.style.cssText = this.TextStyle;
          rotationElement.appendChild(TextElement);
          richMarkerContent.appendChild(rotationElement);

          icon.imageDiv = richMarkerContent;
          var lonlat = new OpenLayers.LonLat(Lon, Lat).transform(
              new OpenLayers.Projection("EPSG:4326"),
              osmmaps[MapClass.currMapID].getProjectionObject()
          );

          var marker = new OpenLayers.Marker(lonlat, icon);
          poiLayer.addMarker(marker);
      };
      this.osm_DeletePOILocation = function () {
          poiLayer.clearMarkers();
      };
  }
  var MarkerPOI = new POIClass();
</script>
</head>
<body onload='initialize(),toggle()'>
<table style="width: 100%; height:100%;overflow-y:hidden">
  <tr>
    <td style='width:75%; height:100%'><div id='map_canvas'></div></td >
    <td style='width:25%; height:100%;overflow-y:hidden;display:block' id='Info'><form id='InfoForm' >
        <div style='display = "block"'>
          <input type="hidden" name="LatLong" id="LatLong" />
          <input type="hidden" id="poiname" value ="" />
          <input type="hidden" id="poilat" value ="" />
          <input type="hidden" id="poilng" value ="" />
          <input type="hidden" name="geodata" id="geodata" value=""  />
          <input type="hidden" name="Area" id="Area" value="0"  />
          <input type="hidden" name="AreaMeter" id="AreaMeter" value="0"  />
          <input type="hidden" name="AreaFeet" id="AreaFeet" value="0"  />
          <input type="hidden" name="AreaMile" id="AreaMile" value="0"  />
          <input type="hidden" id="strokeColor" value ="#00FF00"/>
          <input type="hidden" id="strokeOpacity" value ="1.0" />
          <input type="hidden" id="strokeWeight" value ="3" />
          <input type="hidden" id="PolyImage" value ="" />
          <input type="hidden" id="strokeColor1" value ="#00FF00"/>
          <input type="hidden" id="strokeOpacity1" value ="1.0" />
          <input type="hidden" id="strokeWeight1" value ="3" />
          <input type="hidden" id="MarkerImage" value ="" />
          <input type="hidden" id="strokeColorTR" value="#FF0000" />
          <input type="hidden" name="realaddress" id="realaddress" />
        </div>
        <div style="width:100%;height:100%">
          <div id="directions_panel" name="directions_panel" style="width:100%;overflow-y:"hidden""></div>
        </div>
        <div id="images"> </div>
      </form></td>
  </tr>
</table>
</body>
</html>
